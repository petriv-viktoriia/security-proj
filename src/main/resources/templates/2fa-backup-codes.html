<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–†–µ–∑–µ—Ä–≤–Ω—ñ –∫–æ–¥–∏ 2FA</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">

<div class="bg-white shadow-md rounded-lg p-8 max-w-lg w-full">
    <div class="text-center mb-6">
        <div class="bg-green-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
        </div>
        <h2 class="text-2xl font-bold text-green-600">2FA —É—Å–ø—ñ—à–Ω–æ —É–≤—ñ–º–∫–Ω–µ–Ω–æ!</h2>
    </div>

    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
        <p class="text-yellow-800 font-bold mb-2">‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ!</p>
        <p class="text-sm text-yellow-700">
            –ó–±–µ—Ä–µ–∂—ñ—Ç—å —Ü—ñ —Ä–µ–∑–µ—Ä–≤–Ω—ñ –∫–æ–¥–∏ –≤ –±–µ–∑–ø–µ—á–Ω–æ–º—É –º—ñ—Å—Ü—ñ. –ö–æ–∂–µ–Ω –∫–æ–¥ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑
            –¥–ª—è –≤—Ö–æ–¥—É –≤ –∞–∫–∞—É–Ω—Ç, —è–∫—â–æ —É –≤–∞—Å –Ω–µ–º–∞—î –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–æ–¥–∞—Ç–∫—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞.
        </p>
    </div>

    <div class="mb-6">
        <h3 class="font-bold mb-3">–í–∞—à—ñ —Ä–µ–∑–µ—Ä–≤–Ω—ñ –∫–æ–¥–∏:</h3>
        <div class="bg-gray-50 border border-gray-300 rounded p-4">
            <div class="grid grid-cols-2 gap-3" id="backupCodes">
                <div th:each="code : ${backupCodes}"
                     class="bg-white border border-gray-200 rounded p-2 text-center font-mono text-lg">
                    <span th:text="${code}"></span>
                </div>
            </div>
        </div>
    </div>

    <div class="flex space-x-3 mb-6">
        <button onclick="copyToClipboard()"
                class="flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition">
            üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏ –≤—Å—ñ
        </button>
        <button onclick="downloadCodes()"
                class="flex-1 bg-green-600 text-white py-2 rounded hover:bg-green-700 transition">
            üíæ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏
        </button>
    </div>

    <div class="bg-red-50 border-l-4 border-red-400 p-4 mb-6">
        <p class="text-sm text-red-700">
            <strong>–£–≤–∞–≥–∞:</strong> –¶—ñ –∫–æ–¥–∏ –±—ñ–ª—å—à–µ –Ω–µ –±—É–¥—É—Ç—å –ø–æ–∫–∞–∑–∞–Ω—ñ.
            –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ —ó—Ö –∑–±–µ—Ä–µ–≥–ª–∏ –ø–µ—Ä–µ–¥ —Ç–∏–º, —è–∫ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏.
        </p>
    </div>

    <div class="text-center">
        <a th:href="@{/profile}"
           class="inline-block bg-gray-600 text-white px-6 py-3 rounded hover:bg-gray-700 transition">
            –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –ø—Ä–æ—Ñ—ñ–ª—é
        </a>
    </div>
</div>

<script th:inline="javascript">
    const backupCodes = /*[[${backupCodes}]]*/ [];

    function copyToClipboard() {
        const text = backupCodes.join('\n');
        navigator.clipboard.writeText(text).then(() => {
            alert('–†–µ–∑–µ—Ä–≤–Ω—ñ –∫–æ–¥–∏ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º—ñ–Ω—É!');
        }).catch(err => {
            console.error('–ü–æ–º–∏–ª–∫–∞ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è:', err);
        });
    }

    function downloadCodes() {
        const text = '2FA –†–µ–∑–µ—Ä–≤–Ω—ñ –∫–æ–¥–∏\n' +
            '==================\n\n' +
            backupCodes.join('\n') +
            '\n\n–ó–±–µ—Ä–µ–∂—ñ—Ç—å —Ü—ñ –∫–æ–¥–∏ –≤ –±–µ–∑–ø–µ—á–Ω–æ–º—É –º—ñ—Å—Ü—ñ!\n' +
            '–ö–æ–∂–µ–Ω –∫–æ–¥ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑.';

        const blob = new Blob([text], { type: 'text/plain' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = '2fa-backup-codes.txt';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        window.URL.revokeObjectURL(url);
    }
</script>

</body>
</html>